<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>The Solar System</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<meta name="generator" content="Geany 0.18" />
	<link rel="shortcut icon" href="../../img/fleur.ico" />
	<link href="../../css/main.css" rel="stylesheet" type="text/css" />
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
	<script type="text/javascript" src="../../js/jquery.color.js"></script>
	<script type='text/javascript'>
	<!--
	var keys = 0;
	var playerRow = 0;
	var playerCol = 0;
	var squaresPerRow = 12;
	var suite = ["&spades;", "&clubs;", "&hearts;", "&diams;"];
	var suitePos = new Array();
	
	function checkKeys(id)	{
		if(!$(id).is(':empty'))	{
			var str = $(id).html();
			if(str.charCodeAt(0) == 9824) { str = "Spade"; suite[0] = ""; }
			else if(str.charCodeAt(0) == 9827) { str = "Club"; suite[1] = ""; }
			else if(str.charCodeAt(0) == 9829) { str = "Heart"; suite[2] = ""; }
			else if(str.charCodeAt(0) == 9830) { str = "Diamond"; suite[3] = ""; }
			$('#congrats').fadeOut('fast', function()	{
				$(this).empty()
				.html("Congratulations!  You found the " + str + " key!")
				.fadeIn('slow');
			});
			$(id).empty();
			keys++;
		}
		if(keys == 4) { 
			$(document).unbind('keyup', movement);
			$('#grid').fadeOut(1500, function()	{
				$('#congrats').fadeOut('fast', function()	{
					$(this).empty()
					.html("All the keys are yours!  You win!")
					.fadeIn('slow');
				});
			});
		}
	}
	
	function drawGrid()	{
		var i, j, k, id;
		var squareWidth = Math.round((pageHeight() * 0.85)/squaresPerRow);
		var gridWidth = squaresPerRow * squareWidth;
		$('#grid').empty();
		for(i = 0; i < squaresPerRow; i++)	{
			for(j = 0; j < squaresPerRow; j++)	{
				$('<div class="square" id="' + i + '_' + j + '" ' 
					+ 'style="border: white dotted 1px; '
					+ 'font-size: ' + Math.floor(squareWidth * 0.75)
					+ 'px; top:' + (squareWidth * i)
					+ 'px; left:' + (squareWidth * j)
					+ 'px; width: ' + (squareWidth - 1)
					+ 'px; height:' + (squareWidth - 1)
					+ 'px;"></div>')
					.appendTo('#grid');
			}
		}
		var cssObj = {
			'height'		: gridWidth + 1,
			'margin-left' 	: Math.round(-(gridWidth/2)), 
			'margin-top' 	: Math.round(-(gridWidth/2)),
			'width' 		: gridWidth + 1
		};
		var cssObj2 = {
			'font-size' 	: Math.floor(squareWidth * 0.5), 
			'margin-left' 	: Math.round(-gridWidth/2),
			'top'			: Math.floor(((pageHeight() - gridWidth)/2 - (squareWidth * 0.5))/2),
			'width' 		: gridWidth
		};
		$('#grid').css(cssObj);
		$('#congrats').css(cssObj2);
		for(i = 0; i < 4; i++)	{ $(suitePos[i]).html(suite[i]); }
		$('#' + playerRow + '_' + playerCol).addClass('marked');		
	}
	
	function movement(event)	{
		var id = '#' + playerRow + '_' + playerCol;
		$(id).removeClass('marked');
		if(event.keyCode == '37' || event.keyCode == '65')	{
			event.preventDefault();
			if(playerCol > 0)	{ playerCol--; }
		}
		else if(event.keyCode == '38'|| event.keyCode == '87')	{
			event.preventDefault();
			if(playerRow > 0)	{ playerRow--; }
		}
		else if(event.keyCode == '39' || event.keyCode == '68')	{
			event.preventDefault();
			if(playerCol < (squaresPerRow - 1))	{ playerCol++; }
		}
		else if(event.keyCode == '40' || event.keyCode == '83')	{
			event.preventDefault();
			if(playerRow < (squaresPerRow - 1))	{ playerRow++; }
		}
		id = '#' + playerRow + '_' + playerCol;
		$(id).addClass('marked');
		checkKeys(id);
	}
	
	// Browser Window Size and Position
	// copyright Stephen Chapman, 3rd Jan 2005, 8th Dec 2005
	function pageWidth() {
		return window.innerWidth != null ? window.innerWidth : 
		document.documentElement && document.documentElement.clientWidth ? document.documentElement.clientWidth : 
		document.body != null ? document.body.clientWidth : null;
	}
	
	// Browser Window Size and Position
	// copyright Stephen Chapman, 3rd Jan 2005, 8th Dec 2005
	function pageHeight() {
		return  window.innerHeight != null ? window.innerHeight : 
		document.documentElement && document.documentElement.clientHeight ?  document.documentElement.clientHeight : 
		document.body != null? document.body.clientHeight : null;
	}
	
	$(function()	{
		for(i = 0; i < 4; i++)	{
			j = Math.floor(Math.random() * squaresPerRow);
			k = Math.floor(Math.random() * squaresPerRow);
			if(j != playerRow && k != playerCol)
				suitePos[i] = '#' + j + '_' + k;
			else
				i--;
		}
		drawGrid();
		$(document).bind('keyup', movement); 
	});
	// -->
	</script>
</head>
<body onResize="drawGrid();">
	<div id="congrats"></div>
	<div id="grid">
	</div>
</body>
</html>
